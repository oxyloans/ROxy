"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[8721,2080],{87041:function(e,t,r){r.d(t,{HT:function(){return c},ZB:function(){return g},Zn:function(){return p},al:function(){return u},ei:function(){return h},g2:function(){return d},gq:function(){return f},tR:function(){return m},ww:function(){return l}});var n=r(74165),s=r(15861),a=r(70606),i="https://fintech.oxyloans.com/oxyloans/v1/user/",o=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r,s,i){var o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.Z)({method:t,url:"".concat(r).concat(s),data:i,headers:{"Content-Type":"application/json"}});case 3:if(200!=(o=e.sent).status){e.next=6;break}return e.abrupt("return",o);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,s){return e.apply(this,arguments)}}(),c=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o("POST",i,"resetpassword",{email:t,projectType:"REACT"}),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var s,a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={id:t,primaryType:r},e.next=3,o("POST",i,"login?grantType=PWD",s);case 3:if(200!=(a=e.sent).status){e.next=12;break}return c=a.headers.accesstoken,sessionStorage.setItem("accessToken",c),sessionStorage.setItem("userId",a.data.id),sessionStorage.setItem("tokenTime",a.data.tokenGeneratedTime),e.abrupt("return",a);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var s,a,c,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=1==t.includes("@"),a=!0===s?JSON.stringify({password:r,email:t}):JSON.stringify({password:r,mobileNumber:t}),e.next=4,o("POST",i,"login?grantType=PWD",a);case 4:if(200!=(c=e.sent).status){e.next=13;break}return u=c.headers.accesstoken,sessionStorage.setItem("accessToken",u),sessionStorage.setItem("userId",c.data.id),sessionStorage.setItem("tokenTime",c.data.tokenGeneratedTime),e.abrupt("return",c);case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.replace("+",""),s={whatsappNumber:r},e.next=4,o("POST",i,"whatsapp-login-otp",s);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={mobileNumber:t},e.next=3,o("POST",i,"sendOtp",r);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var s,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={mobileNumber:t,mobileOtpValue:r},e.next=3,o("POST",i,"login?grantType=PWD ",s);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.substring(2),s={},e.next=4,o("POST",i,"whatsapp-login-after-otp-verification/".concat(r),s);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var s,a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=parseInt(r,10),a={whatsappNumber:t.whatsappNumber,session:t.session,otp:s,id:t.id,otpGeneratedTime:t.otpGeneratedTime},e.next=5,o("POST",i,"whatsapp-login-otp-verification",a);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r,s,a){var c,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={password:s,confirmPassword:a},u=o("POST",i,"resetpassword/".concat(t),c),e.abrupt("return",u);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,s){return e.apply(this,arguments)}}()},5899:function(e,t,r){var n=r(93433),s=r(29439),a=r(29867),i=r(92834);t.Z=function(e){var t=e.data,r=e.setwhatsappotphandler,o=(0,a.useState)(["","","","","",""]),c=(0,s.Z)(o,2),u=c[0],l=c[1],p=(0,a.useRef)([]);return(0,a.useEffect)((function(){4===t?(console.log(t),l(["","","",""])):6===t&&(console.log(t),l(["","","","","",""]))}),[t]),(0,a.useEffect)((function(){localStorage.setItem("otp",JSON.stringify(u))}),[u]),(0,i.jsx)("div",{className:"otp-field",children:u.map((function(e,t){return(0,i.jsx)("input",{type:"text",maxLength:"1",value:e,onChange:function(e){return function(e,t){if(/^\d*$/.test(t)&&t.length<=1){var s=(0,n.Z)(u);s[e]=t,l(s),r(s),""!==t&&e<5&&p.current[e+1]&&p.current[e+1].focus()}}(t,e.target.value)},ref:function(e){return p.current[t]=e}},t)}))})}},96880:function(e,t,r){r.r(t);var n=r(74165),s=r(1413),a=r(15861),i=r(29439),o=r(29867),c=(r(69104),r(10078),r(93533)),u=(r(46769),r(44406)),l=r(84670),p=r(25644),d=r(70606),f=(r(68316),r(15333),r(5899)),h=r(87041),m=r(38031),g=(r(8329),r(42080)),x=r(92834);t.default=function(){(0,o.useRef)();var e=(0,o.useState)(!0),t=(0,i.Z)(e,2),r=t[0],v=t[1],j=(0,o.useState)(""),b=(0,i.Z)(j,2),N=b[0],w=b[1],Z=(0,o.useState)({}),y=(0,i.Z)(Z,2),S=(y[0],y[1]),k=(0,o.useState)(""),T=(0,i.Z)(k,2),I=(T[0],T[1]),O=(0,o.useState)([]),M=(0,i.Z)(O,2),P=M[0],E=M[1],L=(0,o.useState)({successMessage:"",otp:"",errorMessage:"",otpdata:""}),U=(0,i.Z)(L,2),C=U[0],R=U[1],A=(0,l.s0)(),W=(0,o.useState)(""),D=(0,i.Z)(W,2),F=D[0],G=D[1],X=(0,o.useState)(!1),J=(0,i.Z)(X,2),_=J[0],q=J[1];(0,o.useEffect)((function(){(0,d.Z)({method:"get",url:"https://ipapi.co/json/"}).then((function(e){S(e.data)})).catch((function(e){console.log(e)})),(0,d.Z)({method:"get",url:"https://api.ipify.org/?format=json"}).then((function(e){I(e.data.ip)})).catch((function(e){console.log(e)}))}),[]);var B=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""==(t=P.length>0?P.join(""):"")?(0,m.MX)("Enter the Whatsapp OTP"):(0,h.tR)(C.otpdata,t).then((function(e){var t,r,n=null===(t=e.headers)||void 0===t?void 0:t.accesstoken;n?(R((0,s.Z)((0,s.Z)({},C),{},{responsedata:e})),sessionStorage.setItem("accessToken",n),sessionStorage.setItem("userId",e.data.id),sessionStorage.setItem("tokenTime",e.data.tokenGeneratedTime),null!=n&&("LENDER"==e.data.primaryType||"ADMIN"==e.data.primaryType?A("/dashboard"):(0,m.MX)("Try to Login of Lender Only"))):400==(null===(r=e.response)||void 0===r?void 0:r.status)?(0,m.MX)(e.response.data.errorMessage):(G(e),q(!0))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""==N||void 0==N?(0,m.MX)("Enter The WhatsApp Number"):(0,h.Zn)(N).then((function(e){200===e.request.status?(v(!1),R((0,s.Z)((0,s.Z)({},C),{},{otpdata:e.data}))):(R((0,s.Z)((0,s.Z)({},C),{},{errorMessage:e.response.data.errorMessage})),(0,m.MX)(e.response.data.errorMessage))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[_&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"main-wrapper  container-fluid",children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsx)("div",{className:"d-flex justify-content-center",children:(0,x.jsx)("img",{src:u.b9,className:"imagelo11",alt:"images-data"})})}),(0,x.jsx)("div",{className:"card-body border-0",children:(0,x.jsx)(g.default,{data:F.data.whatsappLoginResponse})})]})})}),_?(0,x.jsx)(x.Fragment,{}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"main-wrapper login-body",children:(0,x.jsx)("div",{className:"login-wrapper",children:(0,x.jsx)("div",{className:"container",children:(0,x.jsxs)("div",{className:"loginbox",children:[(0,x.jsx)("div",{className:"login-left",children:(0,x.jsx)("img",{className:"img-fluid  h-100",src:u.iL,alt:"Logo"})}),(0,x.jsx)("div",{className:"login-right",children:r?(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"login-right-wrap",children:[(0,x.jsx)("h1",{children:"Welcome to Oxyloans"}),(0,x.jsxs)("p",{className:"account-subtitle",children:["Need an account? ",(0,x.jsx)(p.rU,{to:"/register",children:"Sign Up"})]}),(0,x.jsx)("h2",{children:"Sign in"}),(0,x.jsxs)("div",{className:"phoneinput form-group",children:[(0,x.jsxs)("label",{children:["WhatsApp number",(0,x.jsx)("span",{className:"login-danger",children:"*"})]}),(0,x.jsx)(c.ZP,{className:"phoneinputfiled form-control",value:N,onChange:w,defaultCountry:"IN"})]}),(0,x.jsx)("div",{className:"forgotpass",children:(0,x.jsx)(p.rU,{to:"/forgotpassword",children:"Forgot Password?"})}),(0,x.jsx)("div",{className:"form-group",children:(0,x.jsx)("button",{className:"btn btn-primary btn-block",type:"submit",onClick:H,children:"Send OTP"})}),(0,x.jsxs)("div",{className:"login-or",children:[(0,x.jsx)("span",{className:"or-line"}),(0,x.jsx)("span",{className:"span-or",children:"or"})]}),(0,x.jsx)("div",{className:"social-login",children:(0,x.jsx)(p.rU,{to:"/whatsapplogin",className:"bg-success text-white",children:(0,x.jsx)("i",{className:"fa fa-whatsapp"})})})]})}):(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"login-right-wrap",children:[(0,x.jsx)("h1",{children:"Welcome to Oxyloans"}),(0,x.jsxs)("p",{className:"account-subtitle",children:["Need an account? ",(0,x.jsx)(p.rU,{to:"/register",children:"Sign Up"})]}),(0,x.jsx)("h2",{children:"Otp verification"}),(0,x.jsx)("div",{className:"texts",children:(0,x.jsx)(f.Z,{data:4,setwhatsappotphandler:function(e){E(e)}})}),C.successMessage&&(0,x.jsxs)("div",{className:"errorMessage",children:[C.successMessage," "]}),C.errorMessage&&(0,x.jsxs)("div",{className:"errorMessage",children:[C.errorMessage," "]}),(0,x.jsx)("div",{className:"form-group",children:(0,x.jsx)("button",{className:"btn btn-primary btn-block mt-4",type:"submit",onClick:B,children:"Submit"})}),(0,x.jsxs)("div",{className:"login-or",children:[(0,x.jsx)("span",{className:"or-line"}),(0,x.jsx)("span",{className:"span-or",children:"or"})]}),(0,x.jsx)("div",{className:"social-login",children:(0,x.jsx)(p.rU,{to:"/whatsapplogin",className:"bg-success text-white",children:(0,x.jsx)("i",{className:"fa fa-whatsapp"})})})]})})})]})})})})})]})}},42080:function(e,t,r){r.r(t);var n=r(74165),s=r(15861),a=r(29439),i=r(29867),o=(r(8329),r(84670)),c=r(87041),u=r(25644),l=r(92834);t.default=function(e){var t=e.data,r=(0,i.useState)(t),p=(0,a.Z)(r,2),d=p[0],f=p[1];console.log("Initial data1:",d);var h=(0,o.s0)();(0,i.useEffect)((function(){if(sessionStorage.getItem("whatAppLoginMultipleUser")){var e=JSON.parse(sessionStorage.getItem("whatsAppLoginUsers"));f(e)}}),[]);var m=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.ei)(t);case 3:r=e.sent,s=r.data,null!=(a=r.headers.accesstoken)&&(sessionStorage.setItem("accessToken",a),sessionStorage.setItem("userId",s.id),sessionStorage.setItem("tokenTime",s.tokenGeneratedTime),sessionStorage.setItem("whatAppLoginMultipleUser",!0),sessionStorage.setItem("whatsAppLoginUsers",JSON.stringify(d)),"LENDER"===s.primaryType||"ADMIN"===s.primaryType?h("/dashboard"):"BORROWER"===s.primaryType&&h("/borrowerDashboard")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:"row col-12",children:[(0,l.jsxs)("div",{className:"alert alert-primary col-12 vw-100 text-center",role:"alert",children:["Multiple users are mapped with the given WhatsApp number. To proceed, please select the user you want to login or ","",(0,l.jsx)(u.rU,{to:"/",children:(0,l.jsx)("span",{class:"badge text-bg-secondary",children:" Back to Home"})})]}),(0,l.jsx)("div",{className:"d-flex  justify-content-start flex-row flex-wrap my-2",children:d&&d.length>0&&d.map((function(e,t){return(0,l.jsx)("div",{className:"col-md-3 col-12 col-sm-12 col-lg-3 mx-auto",children:(0,l.jsxs)("div",{className:"panel price panel-red",children:[(0,l.jsx)("div",{className:"panel-heading  text-center",children:(0,l.jsx)("h3",{children:e.userId})}),(0,l.jsx)("div",{className:"panel-body text-center",children:(0,l.jsxs)("ul",{class:"list-group list-group-flush text-center",children:[(0,l.jsx)("li",{className:"list-group-item",children:(0,l.jsx)("b",{className:"paymembership_tenture",children:e.name})}),(0,l.jsx)("li",{className:"list-group-item",children:(0,l.jsxs)("b",{className:"paymembership_tenture",children:[" ",e.email]})})]})}),(0,l.jsx)("div",{className:"panel-footer",children:(0,l.jsx)("button",{className:"btn btn-xs btn-block btn-primary",type:"button",onClick:function(){return m(e.userId)},children:"Login"})})]})},t)}))})]})}},38031:function(e,t,r){r.d(t,{HC:function(){return i},MX:function(){return o},Zc:function(){return c},iq:function(){return a}});r(29867),r(56372);var n=r(25437),s=r.n(n),a=(r(76916),r(51773),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom-center";s().set("notifier","position",t),s().success(e)}),i=function(e){s().set("notifier","position","top-right"),s().error(e)},o=function(e){s().set("notifier","position","top-right"),s().error(e)},c=function(e){s().set("notifier","position","bottom-center"),s().error(e)}},15333:function(){},8329:function(){}}]);
//# sourceMappingURL=8721.b657eeb3.chunk.js.map